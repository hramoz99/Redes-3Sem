Criação de usuários e permissões 

 - gerenciador de servidores > ferramentas > usuários e computadores > click no domínio > botão direito sob o grupo > novo > usuários

 - Alocar permissão no usuário
   selecione o usuário > membro de > adicionar > avançado > localizado agora > ok



  Propriedades adicionais : 

        - selecione o usuário > conta > horario de logon (determinar horário de acesso) > fazer logon em (determinar máquina de acesso) > desbloquear conta

        - selecione o usuário > objetos > segurança de exclusão

        - selecione o usuário > sessões (acesso remoto) 
 
        - selecione o usuário > perfil (script de logon, caminho móvel, caminho de armazenamento do usuário)
        

Ver proxyAddress 
Ver réplicas de senhas


Criando contas de serviços gerenciado

 <> regras do MSA

       - Não podem ser utilizadas entre várias computadores ou no ambiente de clusters onde o serviço é replicadp entre nós
       
       - MSA usa uma senha complexa, aleatoria de 240 caracteres e muda-a automaticamente quando atinge a data de expiração de senha do 
        dominio ou do computador (por padrão, é 30 dias)
        
       - Um cenário comum para usar uma conta de serviço gerenciado pode ser executar um serviço de sql server 2012 ou IIS
       
       - Existe uma dependência no serviço de distribuição de chave começando com o windows server 2012 (para suportar contas de serviços gerenciados em grupo, embora          agora seja necessario para todas as contas de servicos gerenciados)
       
       - Exige o windows server 20008 R2 ou superior
       
       - AD Modulo for windows powerhell
       
       - Net framework 3.5
       
       - O Ad ds deve estar configurado no minimo com o nivel funcional do windows server 2008R2



Gerenciado de servidor > abrir o shell 

      comando 'Add KdsRootKey -efectivetine ((get-date).addhours(-10)' (ADIÇÃO DA KDS)
      comando 'New-ADServiceAccount -Name SQL -DNSHostname SRV-02 -PrinciapalsAllowedToRestrieveManagedPassword SRV-02'(criar uma conta)
      comando 'Add-ADCComputerServiceAccount -identitySRV-02 -ServiceAccount SQL (associar a conta ao servidor sql)
      comando 'get-ADSerceAccount -filter *'(verificar se esta funcionando)
     





Habilitar a lixeira do AD

PASSO A PASSO

Gerenciador do servidor >  ferramentas Central administrativa do AD > modo de exibição para arvore > expandir o dominio > clicar sobr o dominio > habilitar a lixeira > ok




Montagem do perfil móvel 
 
  conectar ao servidor com hyper V > configurações da vm > controlador ECSI > disco rígido > adicionar > novo > avançar > habilitar expansão dinâmica > nome do disco >   definir tamanho > avançar > concluir 

    | Só consegue ser perfil móvel se for geração dois

  iniciar vm > botão direito sob iniciar > gerenciador de disco > botão direito sob o disco > deixar on > botao direito sob o disco > iniciar o disco > GPT > botão       direito sob disco > novo volume simples > avança > avança > avança > definir rótulo do volume > concluir

  criar pasta dentro do disco (nome do user) > botão direito sob a pasta > propriedades > compartilhamento > compartilhamento avançado > compartilhar a pasta (deixar o   $ no nome para ocultar a pasta) > permissões > remover 'Todos' > adicionar o user > habilitar 'leitura e alteração' > Ok > aplicar

  gerenciador do servidor > Usuário e computadores > usuário (para que a pasta foi criada) >  botão direito > propriedades >  perfil > colar o caminho em caminho do     perfil > ok

 | Em caso de problema para login de usuario, ativar o acesso remoto 
                 
PASSO A PASSO
  
  login com qualquer usuario > botao direito sob o iniciar do windows > sistema > area de trabalho remoto > selecionar usuarios > adicionar > senha admin > 
  habilitar acesso remoto   




Pasta Base do usuário 


 criar pasta dentro do disco (nome do user) > botão direito sob a pasta > propriedades > compartilhamento > compartilhamento avançado > compartilhar a pasta (deixar o $ no nome para ocultar a pasta) > permissões > remover 'Todos' > adicionar o user > habilitar leitura e alteração > Ok > aplicar
  
gerenciador do servidor > Usuario e computadores > usuario (para que a pasta foi criada) >  botao direito > propriedades >  perfil > colar o caminho em caminho local
 



Administração - linha de comando 


  Comandos 

   dsadd - adiciona objetos 
   dsget - exibir os objetos 
   dsmod - editar objetos
   dsmove - mover objetos
   dsquery - consulta de objetos com criterios
   dsrm - excluir objetos



Importação de usuarios por csv

abrir base de dados > salvar como CSV(separado por virgula) > botão direito sob o arquivo.csv > editar > editar > substituir > substituir ; por , > subtituir tudo > editar > substituir > substituir CN= por "CN= , > substituir tudo > editar > substituir > substituir =house por =lab > substituir tudo > editar > substituir > substituir os caminhos


abrir o windows powersehll > entrar como admin > csvde -i -f .\USERS-IMPORT.txt   
   
   
 
LINKS ÚTEIS
------------------------------------------------------------------------------------------
generatedata.com
https://github.com/edupopov/powershell
https://systemcenterdudes.com/how-to-install-local-administrator-password-solution-laps/







